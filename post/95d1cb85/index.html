<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="最近在尝试使用 vue3+typescript+jsx 开发组件时，在配置 tsconfig.json 这一步出现了问题，编译报错、编译不通过，或是编译后的文件不符合预期等。之前写 ts demo 的时候，直接去网上 copy 一份配置就可以了，现在自己要开发项目，显然有些配置是行不通了。那么带着这些问题，我专门查阅了一些关于 typescript 项目基本配置的资料，并整理下来，防止同样的坑掉入">
<meta property="og:type" content="article">
<meta property="og:title" content="给你的项目配置tsconfig.json">
<meta property="og:url" content="https://oxyzhg.cn/post/95d1cb85/index.html">
<meta property="og:site_name" content="Oxyzhg">
<meta property="og:description" content="最近在尝试使用 vue3+typescript+jsx 开发组件时，在配置 tsconfig.json 这一步出现了问题，编译报错、编译不通过，或是编译后的文件不符合预期等。之前写 ts demo 的时候，直接去网上 copy 一份配置就可以了，现在自己要开发项目，显然有些配置是行不通了。那么带着这些问题，我专门查阅了一些关于 typescript 项目基本配置的资料，并整理下来，防止同样的坑掉入">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-11-06T02:08:00.000Z">
<meta property="article:modified_time" content="2021-09-20T01:52:56.544Z">
<meta property="article:author" content="Oxyzhg">
<meta property="article:tag" content="typescript">
<meta property="article:tag" content="tsconfig.json">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/logo.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/logo.png">
          
        
    
    <!-- title -->
    <title>给你的项目配置tsconfig.json</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/post/b01c9af0/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/post/bed04d78/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://oxyzhg.cn/post/95d1cb85/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://oxyzhg.cn/post/95d1cb85/&text=给你的项目配置tsconfig.json"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://oxyzhg.cn/post/95d1cb85/&title=给你的项目配置tsconfig.json"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://oxyzhg.cn/post/95d1cb85/&is_video=false&description=给你的项目配置tsconfig.json"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=给你的项目配置tsconfig.json&body=Check out this article: https://oxyzhg.cn/post/95d1cb85/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://oxyzhg.cn/post/95d1cb85/&title=给你的项目配置tsconfig.json"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://oxyzhg.cn/post/95d1cb85/&title=给你的项目配置tsconfig.json"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://oxyzhg.cn/post/95d1cb85/&title=给你的项目配置tsconfig.json"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://oxyzhg.cn/post/95d1cb85/&title=给你的项目配置tsconfig.json"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://oxyzhg.cn/post/95d1cb85/&name=给你的项目配置tsconfig.json&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://oxyzhg.cn/post/95d1cb85/&t=给你的项目配置tsconfig.json"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8-tsconfig"><span class="toc-number">1.</span> <span class="toc-text">为什么要使用 tsconfig</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.</span> <span class="toc-text">初始化配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E8%AF%BB%E5%B8%B8%E7%94%A8%E7%9A%84%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">3.</span> <span class="toc-text">解读常用的配置项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E5%BE%85%E7%BC%96%E8%AF%91%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">指定待编译文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#include"><span class="toc-number">3.1.1.</span> <span class="toc-text">include</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#exclude"><span class="toc-number">3.1.2.</span> <span class="toc-text">exclude</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#files"><span class="toc-number">3.1.3.</span> <span class="toc-text">files</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9"><span class="toc-number">3.2.</span> <span class="toc-text">定义编译选项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#compilerOptions"><span class="toc-number">3.2.1.</span> <span class="toc-text">compilerOptions</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3-ts-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">vue3+ts 项目中的配置</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        给你的项目配置tsconfig.json
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Oxyzhg</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2020-11-06T02:08:00.000Z" itemprop="datePublished">2020-11-06</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/typescript/">typescript</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/tsconfig-json/" rel="tag">tsconfig.json</a>, <a class="tag-link-link" href="/tags/typescript/" rel="tag">typescript</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p>最近在尝试使用 vue3+typescript+jsx 开发组件时，在配置 <em>tsconfig.json</em> 这一步出现了问题，编译报错、编译不通过，或是编译后的文件不符合预期等。之前写 ts demo 的时候，直接去网上 copy 一份配置就可以了，现在自己要开发项目，显然有些配置是行不通了。那么带着这些问题，我专门查阅了一些关于 typescript 项目基本配置的资料，并整理下来，防止同样的坑掉入两次。</p>
<p><em>以下示例基于 <a href="mailto:&#x74;&#x79;&#112;&#101;&#115;&#99;&#x72;&#x69;&#x70;&#116;&#x40;&#52;&#x2e;&#48;&#x2e;&#x33;">&#x74;&#x79;&#112;&#101;&#115;&#99;&#x72;&#x69;&#x70;&#116;&#x40;&#52;&#x2e;&#48;&#x2e;&#x33;</a> 版本。</em></p>
<h2 id="为什么要使用-tsconfig"><a href="#为什么要使用-tsconfig" class="headerlink" title="为什么要使用 tsconfig"></a>为什么要使用 tsconfig</h2><p>TypeScript 使用 <em>tsconfig.json</em> 文件作为其配置文件，当一个目录中存在 <em>tsconfig.json</em> 文件，则认为该目录是 typescript 项目的根目录。</p>
<p>通常 tsconfig 主要包含两部分内容：<strong>指定待编译文件</strong>和<strong>定义编译选项</strong>。</p>
<p>实际上，我们不适用 tsconfig 配置文件，仅通过命令行也可以实现 ts 编译：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">  --outFile // 编译后生成的文件名称</span><br><span class="line">  --target  // 指定ECMAScript目标版本</span><br><span class="line">  --module  // 指定生成哪个模块系统代码</span><br><span class="line">  index.ts  // 源文件</span><br><span class="line">*/</span><br><span class="line">$ npx tsc --outFile index.js --target es5 --module commonjs index.ts</span><br></pre></td></tr></table></figure>

<p>这段代码就可以实现注释中的功能，但是在实际项目开发中，往往是从整个项目入手，单一的命令行已经不能满足项目开发的需要了，这时就需要 <em>tsconfig.json</em> 配置文件来辅助我们进行代码编译。</p>
<p>接下来看下 tsconfig 的使用及注意事项。</p>
<h2 id="初始化配置文件"><a href="#初始化配置文件" class="headerlink" title="初始化配置文件"></a>初始化配置文件</h2><p>安装 typescript 后，我们使用命令生成初始化配置文件：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx tsc --init</span><br></pre></td></tr></table></figure>

<p>这就会为我们自动创建一份较完整的 <em>tsconfig.json</em> 文件，其中的一些配置是通过注释的形式呈现，只需要我们在需要时修改一下配置项即可。生成的默认配置文件如下：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">/* Visit https://aka.ms/tsconfig.json to read more about this file */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Basic Options */</span></span><br><span class="line">    <span class="comment">// &quot;incremental&quot;: true,                   /* Enable incremental compilation */</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span>: <span class="string">&quot;es5&quot;</span> <span class="comment">/* Specify ECMAScript target version: &#x27;ES3&#x27; (default), &#x27;ES5&#x27;, &#x27;ES2015&#x27;, &#x27;ES2016&#x27;, &#x27;ES2017&#x27;, &#x27;ES2018&#x27;, &#x27;ES2019&#x27;, &#x27;ES2020&#x27;, or &#x27;ESNEXT&#x27;. */</span>,</span><br><span class="line">    <span class="attr">&quot;module&quot;</span>: <span class="string">&quot;commonjs&quot;</span> <span class="comment">/* Specify module code generation: &#x27;none&#x27;, &#x27;commonjs&#x27;, &#x27;amd&#x27;, &#x27;system&#x27;, &#x27;umd&#x27;, &#x27;es2015&#x27;, &#x27;es2020&#x27;, or &#x27;ESNext&#x27;. */</span>,</span><br><span class="line">    <span class="comment">// &quot;lib&quot;: [],                             /* Specify library files to be included in the compilation. */</span></span><br><span class="line">    <span class="comment">// &quot;allowJs&quot;: true,                       /* Allow javascript files to be compiled. */</span></span><br><span class="line">    <span class="comment">// &quot;checkJs&quot;: true,                       /* Report errors in .js files. */</span></span><br><span class="line">    <span class="comment">// &quot;jsx&quot;: &quot;preserve&quot;,                     /* Specify JSX code generation: &#x27;preserve&#x27;, &#x27;react-native&#x27;, or &#x27;react&#x27;. */</span></span><br><span class="line">    <span class="comment">// &quot;declaration&quot;: true,                   /* Generates corresponding &#x27;.d.ts&#x27; file. */</span></span><br><span class="line">    <span class="comment">// &quot;declarationMap&quot;: true,                /* Generates a sourcemap for each corresponding &#x27;.d.ts&#x27; file. */</span></span><br><span class="line">    <span class="comment">// &quot;sourceMap&quot;: true,                     /* Generates corresponding &#x27;.map&#x27; file. */</span></span><br><span class="line">    <span class="comment">// &quot;outFile&quot;: &quot;./&quot;,                       /* Concatenate and emit output to single file. */</span></span><br><span class="line">    <span class="comment">// &quot;outDir&quot;: &quot;./&quot;,                        /* Redirect output structure to the directory. */</span></span><br><span class="line">    <span class="comment">// &quot;rootDir&quot;: &quot;./&quot;,                       /* Specify the root directory of input files. Use to control the output directory structure with --outDir. */</span></span><br><span class="line">    <span class="comment">// &quot;composite&quot;: true,                     /* Enable project compilation */</span></span><br><span class="line">    <span class="comment">// &quot;tsBuildInfoFile&quot;: &quot;./&quot;,               /* Specify file to store incremental compilation information */</span></span><br><span class="line">    <span class="comment">// &quot;removeComments&quot;: true,                /* Do not emit comments to output. */</span></span><br><span class="line">    <span class="comment">// &quot;noEmit&quot;: true,                        /* Do not emit outputs. */</span></span><br><span class="line">    <span class="comment">// &quot;importHelpers&quot;: true,                 /* Import emit helpers from &#x27;tslib&#x27;. */</span></span><br><span class="line">    <span class="comment">// &quot;downlevelIteration&quot;: true,            /* Provide full support for iterables in &#x27;for-of&#x27;, spread, and destructuring when targeting &#x27;ES5&#x27; or &#x27;ES3&#x27;. */</span></span><br><span class="line">    <span class="comment">// &quot;isolatedModules&quot;: true,               /* Transpile each file as a separate module (similar to &#x27;ts.transpileModule&#x27;). */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Strict Type-Checking Options */</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span>: <span class="literal">true</span> <span class="comment">/* Enable all strict type-checking options. */</span>,</span><br><span class="line">    <span class="comment">// &quot;noImplicitAny&quot;: true,                 /* Raise error on expressions and declarations with an implied &#x27;any&#x27; type. */</span></span><br><span class="line">    <span class="comment">// &quot;strictNullChecks&quot;: true,              /* Enable strict null checks. */</span></span><br><span class="line">    <span class="comment">// &quot;strictFunctionTypes&quot;: true,           /* Enable strict checking of function types. */</span></span><br><span class="line">    <span class="comment">// &quot;strictBindCallApply&quot;: true,           /* Enable strict &#x27;bind&#x27;, &#x27;call&#x27;, and &#x27;apply&#x27; methods on functions. */</span></span><br><span class="line">    <span class="comment">// &quot;strictPropertyInitialization&quot;: true,  /* Enable strict checking of property initialization in classes. */</span></span><br><span class="line">    <span class="comment">// &quot;noImplicitThis&quot;: true,                /* Raise error on &#x27;this&#x27; expressions with an implied &#x27;any&#x27; type. */</span></span><br><span class="line">    <span class="comment">// &quot;alwaysStrict&quot;: true,                  /* Parse in strict mode and emit &quot;use strict&quot; for each source file. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Additional Checks */</span></span><br><span class="line">    <span class="comment">// &quot;noUnusedLocals&quot;: true,                /* Report errors on unused locals. */</span></span><br><span class="line">    <span class="comment">// &quot;noUnusedParameters&quot;: true,            /* Report errors on unused parameters. */</span></span><br><span class="line">    <span class="comment">// &quot;noImplicitReturns&quot;: true,             /* Report error when not all code paths in function return a value. */</span></span><br><span class="line">    <span class="comment">// &quot;noFallthroughCasesInSwitch&quot;: true,    /* Report errors for fallthrough cases in switch statement. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Module Resolution Options */</span></span><br><span class="line">    <span class="comment">// &quot;moduleResolution&quot;: &quot;node&quot;,            /* Specify module resolution strategy: &#x27;node&#x27; (Node.js) or &#x27;classic&#x27; (TypeScript pre-1.6). */</span></span><br><span class="line">    <span class="comment">// &quot;baseUrl&quot;: &quot;./&quot;,                       /* Base directory to resolve non-absolute module names. */</span></span><br><span class="line">    <span class="comment">// &quot;paths&quot;: &#123;&#125;,                           /* A series of entries which re-map imports to lookup locations relative to the &#x27;baseUrl&#x27;. */</span></span><br><span class="line">    <span class="comment">// &quot;rootDirs&quot;: [],                        /* List of root folders whose combined content represents the structure of the project at runtime. */</span></span><br><span class="line">    <span class="comment">// &quot;typeRoots&quot;: [],                       /* List of folders to include type definitions from. */</span></span><br><span class="line">    <span class="comment">// &quot;types&quot;: [],                           /* Type declaration files to be included in compilation. */</span></span><br><span class="line">    <span class="comment">// &quot;allowSyntheticDefaultImports&quot;: true,  /* Allow default imports from modules with no default export. This does not affect code emit, just typechecking. */</span></span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span> <span class="comment">/* Enables emit interoperability between CommonJS and ES Modules via creation of namespace objects for all imports. Implies &#x27;allowSyntheticDefaultImports&#x27;. */</span>,</span><br><span class="line">    <span class="comment">// &quot;preserveSymlinks&quot;: true,              /* Do not resolve the real path of symlinks. */</span></span><br><span class="line">    <span class="comment">// &quot;allowUmdGlobalAccess&quot;: true,          /* Allow accessing UMD globals from modules. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Source Map Options */</span></span><br><span class="line">    <span class="comment">// &quot;sourceRoot&quot;: &quot;&quot;,                      /* Specify the location where debugger should locate TypeScript files instead of source locations. */</span></span><br><span class="line">    <span class="comment">// &quot;mapRoot&quot;: &quot;&quot;,                         /* Specify the location where debugger should locate map files instead of generated locations. */</span></span><br><span class="line">    <span class="comment">// &quot;inlineSourceMap&quot;: true,               /* Emit a single file with source maps instead of having a separate file. */</span></span><br><span class="line">    <span class="comment">// &quot;inlineSources&quot;: true,                 /* Emit the source alongside the sourcemaps within a single file; requires &#x27;--inlineSourceMap&#x27; or &#x27;--sourceMap&#x27; to be set. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Experimental Options */</span></span><br><span class="line">    <span class="comment">// &quot;experimentalDecorators&quot;: true,        /* Enables experimental support for ES7 decorators. */</span></span><br><span class="line">    <span class="comment">// &quot;emitDecoratorMetadata&quot;: true,         /* Enables experimental support for emitting type metadata for decorators. */</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Advanced Options */</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span>: <span class="literal">true</span> <span class="comment">/* Skip type checking of declaration files. */</span>,</span><br><span class="line">    <span class="attr">&quot;forceConsistentCasingInFileNames&quot;</span>: <span class="literal">true</span> <span class="comment">/* Disallow inconsistently-cased references to the same file. */</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>虽然在项目目录下直接创建一个 <em>tsconfig.json</em> 文件也未尝不可，但通过命令行创建的配置文件附带了这么多的默认配置选项，还是太香了。</p>
<p>这时即可通过命令行编译 ts 文件了：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npx tsc index.ts</span><br></pre></td></tr></table></figure>

<p>注意，tsc 的命令行选项具有更高的优先级，会覆盖 <em>tsconfig.json</em> 中的同名选项。</p>
<p>生成的配置项，到底哪些才是适配我们手头的项目呢？接下来我们来看一看。</p>
<h2 id="解读常用的配置项"><a href="#解读常用的配置项" class="headerlink" title="解读常用的配置项"></a>解读常用的配置项</h2><p>通过查阅 <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/tsconfig">TypeScript Reference</a> 文档，结合上述生成的配置项，我们可以总结出主要的两部分配置：</p>
<ul>
<li>指定待编译文件： <code>exclude</code> , <code>include</code> , <code>files</code></li>
<li>定义编译选项： <code>compilerOptions</code></li>
</ul>
<p>那么我们就来解读一下这些配置项，已经关键点。</p>
<h3 id="指定待编译文件"><a href="#指定待编译文件" class="headerlink" title="指定待编译文件"></a>指定待编译文件</h3><p>官方列出的关于指定待编译文件的配置项其实不止这些，但在我们的项目中，这三项更为重要。这些配置可以帮助我们确保 typescript 选择正确的文件进行编译。</p>
<h4 id="include"><a href="#include" class="headerlink" title="include"></a>include</h4><p>指定要包含在程序中的文件名或特定模式数组，这些文件名是基于 <em>tsconfig.json</em> 的相对地址。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;include&quot;</span>: [</span><br><span class="line">    <span class="comment">// &quot;scr&quot;      // 会编译src目录下的所有文件，包括子目录</span></span><br><span class="line">    <span class="comment">// &quot;scr/*&quot;    // 只会编译scr一级目录下的文件</span></span><br><span class="line">    <span class="comment">// &quot;scr/*/*&quot;  // 只会编译scr二级目录下的文件</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通常在指定一个目录后，这个目录下的所有 ts 文件都会被编译，即使没有被用到，如果是空文件等不符合要求的文件，或许还会报错。我之前在项目中会配置这个选项，现在由于一些没必要的报错，我更倾向于配置 files 选项。</p>
<h4 id="exclude"><a href="#exclude" class="headerlink" title="exclude"></a>exclude</h4><p>指定在解析 include 时应跳过的文件名或特定模式数组。同样支持 glob 通配符。</p>
<p>注意这里的默认值是 <code>[&quot;node_modules&quot;, &quot;bower_components&quot;, &quot;jspm_packages&quot;]</code>  这些依赖包目录和 <code>compilerOptions.outDir</code>  指定的文件夹。大多数情况下，我们不需要额外配置 exclude 选项，因为这些默认值包含了大多数不需要编译的目录和文件，基本能满足需求。</p>
<p>跟 include 配置项一样，支持 glob 通配符：</p>
<ul>
<li><code>*</code> 匹配 0 或多个字符（不包括目录分隔符）</li>
<li><code>?</code> 匹配一个任意字符（不包括目录分隔符）</li>
<li><code>**/</code> 递归匹配任意子目录</li>
</ul>
<h4 id="files"><a href="#files" class="headerlink" title="files"></a>files</h4><p>指定需要编译的单个文件列表。通过 import 引入的其他模块的文件也会被编译。</p>
<p>如果是中小型项目，或不需要使用通配符匹配的项目，可通过这个配置来代替 include 配置项。目前我在封装组件的时候就是配置 files 指定编译程序的入口，然后通过模块关联编译其他文件。</p>
<p>其他的配置，如 extends, references, typeAcquisition 等一般很少用到，这里就不做过多解释，详情可查文档。</p>
<h3 id="定义编译选项"><a href="#定义编译选项" class="headerlink" title="定义编译选项"></a>定义编译选项</h3><p>编译选项 <code>compilerOptions</code>  有很多，通常分为以下几类：</p>
<ul>
<li>Basic Options</li>
<li>Strict Type-Checking Options</li>
<li>Additional Checks</li>
<li>Module Resolution Options</li>
<li>Source Map Options</li>
<li>Experimental Options</li>
<li>Advanced Options</li>
</ul>
<h4 id="compilerOptions"><a href="#compilerOptions" class="headerlink" title="compilerOptions"></a>compilerOptions</h4><p>这就是定义编译选项，我们可以根据自己项目的需要，选择合适的配置项。由于配置项较多，这里就挑选几个常用易出错的点进行分析。</p>
<ul>
<li>target — 编译后目标语言的版本，目前现代浏览器大多支持 ES6 特性，因此可以选择 ES2015 或更高版本。</li>
<li>module — 编译后代码的模块类型，可以根据不同的使用场景选择不同的模块化方案。</li>
<li>lib — 编译需要引入的库，因项目 javascript 版本和编译后使用场景而异，可以查阅各 ECMA 版本对应的库。</li>
<li>allowJs — 是否允许在你的 ts 文件中引入 js 模块，通常是允许的。</li>
<li>checkJs — 是否允许校验你的 js 代码并抛出错误，这个看实际情况而定吧。</li>
<li>jsx — 如果组件是使用 jsx 编写，这决定了输出的代码的组织形式，在 vue+jsx 要使用 preserve.</li>
<li>declaration — 是否生成 .d.ts 文件。</li>
<li>outFile — 所有代码输出到一个文件中，这通常是由 webpack/rollup 决定的。</li>
<li>outDir — 指定编译后文件的输出目录，如果是 npm 包通常配置 lib 文件夹。</li>
<li>rootDir — 指定文件最长公共路径，用于控制输出目录结构，通常是自动计算，也可以指定某些值。</li>
<li>incremental — 是否增量编译，可以提升再次编译速度。</li>
<li>tsBuildInfoFile — 增量编译文件存储位置。</li>
<li>removeComments — 移除注释，可以根据情况配置，或在 webpack/rollup 中集中处理。</li>
<li>isolatedModules</li>
<li>strict — 开启严格类型检查。此项开启后 noImplicitAny, noImplicitThis, strictNullChecks, etc 会默认开启。</li>
<li>noImplicitAny — 不允许隐式 any 类型。</li>
<li>noImplicitThis — 不允许 this 是隐式 any 类型，谨慎使用。</li>
<li>strictNullChecks — 不允许把 null,undefined 赋值给其他类型的变量。</li>
<li>strictFunctionTypes — 不允许函数参数双向协变。</li>
<li>strictBindCallApply — 严格的 bind/call/apply 检查。</li>
<li>strictPropertyInitialization — 类的实例属性必须初始化。</li>
<li>alwaysStrict — 开启后，编译后的源代码都会注入 <code>&quot;use strict&quot;</code> 。</li>
<li>noUnusedLocals — 开启后，只声明未使用的变量会报错，默认关闭。</li>
<li>noUnusedParameters — 开启后，只声明未使用的函数参数会报错，默认关闭。</li>
<li>noImplicitReturns — 开启后，要求每个函数都要有返回值，默认关闭。</li>
<li>noFallthroughCasesInSwitch — 开启后，确保每个 switch…case 都必须有 break/return 语句，默认关闭。</li>
<li>moduleResolution — 指定模块解析策略。</li>
<li>baseUrl — 解析非相对模块的基地址，默认是当前目录。</li>
<li>paths — 路径映射，相对于 baseUrl.</li>
<li>rootDirs — 将多个目录放在一个虚拟目录下，用于运行时，即编译后引入文件的位置可能发生变化。</li>
<li>esModuleInterop —</li>
</ul>
<p>主要的编译相关的配置已经差不多了，这些足以支撑你完成一个 typescript 项目，剩下还有不少配置没列在这，如果有需要还是查阅<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/tsconfig">官方文档</a>为主。</p>
<h2 id="vue3-ts-项目中的配置"><a href="#vue3-ts-项目中的配置" class="headerlink" title="vue3+ts 项目中的配置"></a>vue3+ts 项目中的配置</h2><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;compilerOptions&quot;</span>: &#123;</span><br><span class="line">    <span class="comment">/* Basic Options */</span></span><br><span class="line">    <span class="attr">&quot;target&quot;</span>: <span class="string">&quot;es2015&quot;</span> <span class="comment">/* 编译成 ES2015 */</span>,</span><br><span class="line">    <span class="attr">&quot;module&quot;</span>: <span class="string">&quot;es2015&quot;</span> <span class="comment">/* 编译后的代码模块化方案是 ES Module */</span>,</span><br><span class="line">    <span class="attr">&quot;allowJs&quot;</span>: <span class="literal">true</span> <span class="comment">/* 允许 javascript 文件编译 */</span>,</span><br><span class="line">    <span class="attr">&quot;jsx&quot;</span>: <span class="string">&quot;preserve&quot;</span> <span class="comment">/* 组件使用 JSX 语法编写，这里采用 vue3 推荐的 preserve */</span>,</span><br><span class="line">    <span class="attr">&quot;declaration&quot;</span>: <span class="literal">true</span> <span class="comment">/* 生成 .d.ts 文件，不过现在还没发现编译后声明文件的作用 */</span>,</span><br><span class="line">    <span class="attr">&quot;outDir&quot;</span>: <span class="string">&quot;dist&quot;</span> <span class="comment">/* 编译后的文件输出到 dist 文件夹 */</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Strict Type-Checking Options */</span></span><br><span class="line">    <span class="attr">&quot;strict&quot;</span>: <span class="literal">true</span> <span class="comment">/* 开启严格类型检查，其余的几项也会默认开启 */</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Module Resolution Options */</span></span><br><span class="line">    <span class="attr">&quot;moduleResolution&quot;</span>: <span class="string">&quot;node&quot;</span> <span class="comment">/* 使用 nodejs 提供的模块解析策略 */</span>,</span><br><span class="line">    <span class="attr">&quot;esModuleInterop&quot;</span>: <span class="literal">true</span> <span class="comment">/* 兼容 cjs 和 esm 模块化导入导出方案 */</span>,</span><br><span class="line"></span><br><span class="line">    <span class="comment">/* Advanced Options */</span></span><br><span class="line">    <span class="attr">&quot;skipLibCheck&quot;</span>: <span class="literal">true</span> <span class="comment">/* Skip type checking of declaration files. */</span>,</span><br><span class="line">    <span class="attr">&quot;forceConsistentCasingInFileNames&quot;</span>: <span class="literal">true</span> <span class="comment">/* Disallow inconsistently-cased references to the same file. */</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;files&quot;</span>: [<span class="string">&quot;src/index.ts&quot;</span> <span class="comment">/* 项目入口文件 */</span>]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上就是接下来使用 vue3+typescript+jsx 开发组件用例的 <em>tsconfig.json</em> 配置文件，目前仍在探索结合 rollup 的打包方案。</p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8-tsconfig"><span class="toc-number">1.</span> <span class="toc-text">为什么要使用 tsconfig</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">2.</span> <span class="toc-text">初始化配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E8%AF%BB%E5%B8%B8%E7%94%A8%E7%9A%84%E9%85%8D%E7%BD%AE%E9%A1%B9"><span class="toc-number">3.</span> <span class="toc-text">解读常用的配置项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8C%87%E5%AE%9A%E5%BE%85%E7%BC%96%E8%AF%91%E6%96%87%E4%BB%B6"><span class="toc-number">3.1.</span> <span class="toc-text">指定待编译文件</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#include"><span class="toc-number">3.1.1.</span> <span class="toc-text">include</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#exclude"><span class="toc-number">3.1.2.</span> <span class="toc-text">exclude</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#files"><span class="toc-number">3.1.3.</span> <span class="toc-text">files</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E7%BC%96%E8%AF%91%E9%80%89%E9%A1%B9"><span class="toc-number">3.2.</span> <span class="toc-text">定义编译选项</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#compilerOptions"><span class="toc-number">3.2.1.</span> <span class="toc-text">compilerOptions</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#vue3-ts-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">vue3+ts 项目中的配置</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://oxyzhg.cn/post/95d1cb85/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://oxyzhg.cn/post/95d1cb85/&text=给你的项目配置tsconfig.json"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://oxyzhg.cn/post/95d1cb85/&title=给你的项目配置tsconfig.json"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://oxyzhg.cn/post/95d1cb85/&is_video=false&description=给你的项目配置tsconfig.json"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=给你的项目配置tsconfig.json&body=Check out this article: https://oxyzhg.cn/post/95d1cb85/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://oxyzhg.cn/post/95d1cb85/&title=给你的项目配置tsconfig.json"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://oxyzhg.cn/post/95d1cb85/&title=给你的项目配置tsconfig.json"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://oxyzhg.cn/post/95d1cb85/&title=给你的项目配置tsconfig.json"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://oxyzhg.cn/post/95d1cb85/&title=给你的项目配置tsconfig.json"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://oxyzhg.cn/post/95d1cb85/&name=给你的项目配置tsconfig.json&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://oxyzhg.cn/post/95d1cb85/&t=给你的项目配置tsconfig.json"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 Oxyzhg
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
