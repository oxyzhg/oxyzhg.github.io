<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="使用场景对于开发环境，通常希望更快速的 source map，需要添加到 bundle 文件以增加体积为代价；对于生产环境，通常希望更精确的 source map，需要从 bundle 中分离并独立存在，并且尽量保证 rebuild 速度。 关键字及作用书写格式 [inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map 关键字说明">
<meta property="og:type" content="article">
<meta property="og:title" content="Source Map 配置分析">
<meta property="og:url" content="https://oxyzhg.cn/post/36fc7ed/index.html">
<meta property="og:site_name" content="Oxyzhg">
<meta property="og:description" content="使用场景对于开发环境，通常希望更快速的 source map，需要添加到 bundle 文件以增加体积为代价；对于生产环境，通常希望更精确的 source map，需要从 bundle 中分离并独立存在，并且尽量保证 rebuild 速度。 关键字及作用书写格式 [inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map 关键字说明">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-02-05T10:59:47.000Z">
<meta property="article:modified_time" content="2021-02-27T09:00:00.640Z">
<meta property="article:author" content="Oxyzhg">
<meta property="article:tag" content="webpack">
<meta property="article:tag" content="source-map">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/logo.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/logo.png">
          
        
    
    <!-- title -->
    <title>Source Map 配置分析</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.4.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/post/a9a6c8b0/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://oxyzhg.cn/post/36fc7ed/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://oxyzhg.cn/post/36fc7ed/&text=Source Map 配置分析"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://oxyzhg.cn/post/36fc7ed/&title=Source Map 配置分析"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://oxyzhg.cn/post/36fc7ed/&is_video=false&description=Source Map 配置分析"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Source Map 配置分析&body=Check out this article: https://oxyzhg.cn/post/36fc7ed/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://oxyzhg.cn/post/36fc7ed/&title=Source Map 配置分析"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://oxyzhg.cn/post/36fc7ed/&title=Source Map 配置分析"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://oxyzhg.cn/post/36fc7ed/&title=Source Map 配置分析"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://oxyzhg.cn/post/36fc7ed/&title=Source Map 配置分析"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://oxyzhg.cn/post/36fc7ed/&name=Source Map 配置分析&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://oxyzhg.cn/post/36fc7ed/&t=Source Map 配置分析"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.</span> <span class="toc-text">使用场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97%E5%8F%8A%E4%BD%9C%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">关键字及作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E8%AF%B4%E6%98%8E"><span class="toc-number">3.</span> <span class="toc-text">代码质量说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE%E5%88%86%E6%9E%90"><span class="toc-number">4.</span> <span class="toc-text">常见配置分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%E5%88%86%E6%9E%90"><span class="toc-number">5.</span> <span class="toc-text">具体应用场景分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E4%BA%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">5.1.</span> <span class="toc-text">对于开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E5%AE%9A%E5%9C%BA%E6%99%AF"><span class="toc-number">5.2.</span> <span class="toc-text">特定场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E4%BA%8E%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83"><span class="toc-number">5.3.</span> <span class="toc-text">对于生产环境</span></a></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Source Map 配置分析
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Oxyzhg</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2021-02-05T10:59:47.000Z" itemprop="datePublished">2021-02-05</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%8C%96/">前端工程化</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/source-map/" rel="tag">source-map</a>, <a class="tag-link-link" href="/tags/webpack/" rel="tag">webpack</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h2><p>对于开发环境，通常希望更快速的 source map，需要添加到 bundle 文件以增加体积为代价；对于生产环境，通常希望更精确的 source map，需要从 bundle 中分离并独立存在，并且尽量保证 rebuild 速度。</p>
<h2 id="关键字及作用"><a href="#关键字及作用" class="headerlink" title="关键字及作用"></a>关键字及作用</h2><p>书写格式 <code>[inline-|hidden-|eval-][nosources-][cheap-[module-]]source-map</code></p>
<p>关键字说明：</p>
<ul>
<li><strong>source-map</strong>: 非 cheap, eval 修饰的类型，最终都会生成 .map 文件，并在 bundle 文件中添加引用注释。</li>
<li><strong>eval</strong>: 使用 eval 函数包裹源代码。该关键字不会生成单独的 .map 文件。</li>
<li><strong>cheap</strong>: 没有列映射(column mapping)的 source map，忽略 loader source map。</li>
<li><strong>inline</strong>: 不会生成单独的 .map 文件，与形如 eval-* 类型生成的代码类似都会添加到 bundle 中。</li>
<li><strong>module</strong>: 将 loader source map 简化为每行一个映射(mapping)。</li>
<li><strong>hidden</strong>: 生成 source map 文件，但不会为 bundle 增加引用注释。</li>
</ul>
<p>注意点：</p>
<ul>
<li>eval, inline 都可以看作是 source map 的修饰符，并且这两者是并列关系，不会同时出现。</li>
<li>eval, inline 都会将 source map 内容以注释的形式添加到 bundle 中，这会增加 bundle 文件体积，不适用生产环境。</li>
</ul>
<h2 id="代码质量说明"><a href="#代码质量说明" class="headerlink" title="代码质量说明"></a>代码质量说明</h2><ul>
<li><strong>bundled</strong>: 所有生成的代码视作一大块代码。没有相互分离的模块。</li>
<li><strong>generated</strong>: 每个模块相互分离，并用模块名称进行注释。可以看到 webpack 生成的代码。示例：你会看到类似 <code>var module__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(42); module__WEBPACK_IMPORTED_MODULE_1__.a();</code>，而不是 <code>import &#123;test&#125; from &quot;module&quot;; test();</code>。</li>
<li><strong>transformed</strong>: 每个模块相互分离，并用模块名称进行注释。可以看到 loader 转译后、webpack 转换前的代码。示例：你会看到类似 <code>import &#123;test&#125; from &quot;module&quot;; var A = function(_test) &#123; ... &#125;(test);</code>，而不是 <code>import &#123;test&#125; from &quot;module&quot;; class A extends test &#123;&#125;</code>。</li>
<li><strong>original lines</strong>: 每个模块相互分离，并用模块名称进行注释。可以看到转译前的代码。</li>
<li><strong>original</strong>: source map 不包含源码内容。浏览器通常会去服务中加载源代码。</li>
</ul>
<h2 id="常见配置分析"><a href="#常见配置分析" class="headerlink" title="常见配置分析"></a>常见配置分析</h2><table>
<thead>
<tr>
<th>devtool</th>
<th>quality</th>
<th>build</th>
<th>rebuild</th>
</tr>
</thead>
<tbody><tr>
<td>eval</td>
<td>generated</td>
<td>fast</td>
<td>fastest</td>
</tr>
<tr>
<td>eval-source-map</td>
<td>original</td>
<td>slowest</td>
<td>ok</td>
</tr>
<tr>
<td>eval-cheap-source-map</td>
<td>transformed</td>
<td>ok</td>
<td>fast</td>
</tr>
<tr>
<td>eval-cheap-module-source-map</td>
<td>original lines</td>
<td>slow</td>
<td>fast</td>
</tr>
<tr>
<td>inline-source-map</td>
<td>original</td>
<td>slowest</td>
<td>slowest</td>
</tr>
<tr>
<td>cheap-source-map</td>
<td>transformed</td>
<td>ok</td>
<td>slow</td>
</tr>
<tr>
<td>inline-cheap-source-map</td>
<td>transformed</td>
<td>ok</td>
<td>slow</td>
</tr>
<tr>
<td>cheap-module-source-map</td>
<td>original lines</td>
<td>slow</td>
<td>slow</td>
</tr>
<tr>
<td>inline-cheap-module-source-map</td>
<td>original lines</td>
<td>slow</td>
<td>slow</td>
</tr>
<tr>
<td>source-map</td>
<td>original</td>
<td>slowest</td>
<td>slowest</td>
</tr>
<tr>
<td>hidden-source-map</td>
<td>original</td>
<td>slowest</td>
<td>slowest</td>
</tr>
<tr>
<td>nosources-source-map</td>
<td>original</td>
<td>slowest</td>
<td>slowest</td>
</tr>
</tbody></table>
<p>分析与总结：</p>
<ol>
<li>eval,inline,hidden,nosources 都是不影响 source map 质量的修饰符，它们决定了 source map 以什么形式出现在什么地方。</li>
<li>形如 *-module-source-map 类型，source map 质量都是 original lines.</li>
<li>形如 *-cheap-source-map 类型，会影响 source map 质量，最终看到的都是转换后的代码。</li>
<li>影响 source map 质量的修饰符优先级顺序是：module&gt;cheap&gt;eval=inline=hidden=nosources</li>
<li>source map 代码质量顺序是：original&gt;original lines&gt;transformed&gt;generated</li>
<li>inline,hidden,nosources 都不影响 build/rebuild 速度。</li>
<li>初次构建速度跟代码质量有关系，代码越精简生成速度越快，生成速度顺序是：generated&gt;transform&gt;original lines&gt;original</li>
<li>对于再次构建来说，形如 eval-* 类型，不会生成 source map 文件，再次构建速度较快，cheap 修饰符也会大幅加快再次构建速度。module 修饰符（webpack5）对再次构建速度的影响可忽略不计。总的来说，是否生成 source map 文件起决定性作用，cheap 等影响代码质量的修饰符因素次之。</li>
<li>虽然表中 eval 类型在 build/rebuild 两方面表现都非常突出，但由于开发环境我们需要尽可能的映射到源代码，因此尽量在 eval 的基础上选择其他更适合的类型。</li>
</ol>
<h2 id="具体应用场景分析"><a href="#具体应用场景分析" class="headerlink" title="具体应用场景分析"></a>具体应用场景分析</h2><h3 id="对于开发环境"><a href="#对于开发环境" class="headerlink" title="对于开发环境"></a>对于开发环境</h3><p><strong>eval</strong></p>
<p>每个模块都使用 eval 执行，并且都有 <code>//# sourceURL</code>。该项构建很快，但缺点也很明显，由于会映射到转换后的代码，而不是映射到原始代码（没有从 loader 中获取 source map），所以不能正确的显示行数。<em>这种类型一般不使用，映射不准确还不如不用。</em></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function">()=&gt;</span>&#123;<span class="built_in">eval</span>(<span class="string">&quot;console.log(1122);document.body.innerHTML=&#x27;&lt;h1&gt;Hello world!&lt;/h1&gt;&#x27;;\n\n//# sourceURL=webpack://@dotlim/scripts/./example/src/index.js?&quot;</span>)&#125;)();</span><br></pre></td></tr></table></figure>

<p>映射形式 <code>index.js:1</code></p>
<p><strong>eval-source-map</strong></p>
<p>每个模块使用 eval 执行，并且 source map 转换为 DataURL 添加到 eval 中。初始化 source map 时较慢，但是会在重新构建时提供较快的速度，并且生成实际的文件。行数能够正确映射，因为会映射到原始代码中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function">()=&gt;</span>&#123;<span class="built_in">eval</span>(<span class="string">&quot;console.log(1122);document.body.innerHTML=&#x27;&lt;h1&gt;Hello world!&lt;/h1&gt;&#x27;;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AZG90bGltL3NjcmlwdHMvLi9leGFtcGxlL3NyYy9pbmRleC5qcz8yNGE3Il0sIm5hbWVzIjpbImNvbnNvbGUiLCJkb2N1bWVudCJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU8sQ0FBUEEsR0FBQUEsQ0FBQUEsSUFBQUEsRUFDQUMsUUFBUSxDQUFSQSxJQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSx1QkFBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zb2xlLmxvZygxMTIyKTtcclxuZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSAnPGgxPkhlbGxvIHdvcmxkITwvaDE+JztcclxuIl0sImZpbGUiOiI0MTMuanMiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///413\n&quot;</span>)&#125;)();</span><br></pre></td></tr></table></figure>

<p>映射形式 <code>index.js?24a7:1</code></p>
<p><strong>eval-cheap-source-map</strong></p>
<p>类似 eval-source-map，但没有生成列映射(column mapping)，只是映射行数。它会忽略源自 loader 的 source map，并且仅显示转译后的代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function">()=&gt;</span>&#123;<span class="built_in">eval</span>(<span class="string">&quot;console.log(1122);document.body.innerHTML=&#x27;&lt;h1&gt;Hello world!&lt;/h1&gt;&#x27;;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AZG90bGltL3NjcmlwdHMvLi9leGFtcGxlL3NyYy9pbmRleC5qcz8yNGE3Il0sIm5hbWVzIjpbImNvbnNvbGUiLCJkb2N1bWVudCJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU8sQ0FBUEEsR0FBQUEsQ0FBQUEsSUFBQUEsRUFDQUMsUUFBUSxDQUFSQSxJQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSx1QkFBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zb2xlLmxvZygxMTIyKTtcclxuZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSAnPGgxPkhlbGxvIHdvcmxkITwvaDE+JztcclxuIl0sImZpbGUiOiI0MTMuanMiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///413\n&quot;</span>)&#125;)();</span><br></pre></td></tr></table></figure>

<p>映射形式 <code>index.js?24a7:1 </code></p>
<p><strong>eval-cheap-module-source-map</strong></p>
<p>类似 eval-cheap-source-map，在这种情况下，源自 loader 的 source map 会得到更好的处理结果。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(<span class="function">()=&gt;</span>&#123;<span class="built_in">eval</span>(<span class="string">&quot;console.log(1122);document.body.innerHTML=&#x27;&lt;h1&gt;Hello world!&lt;/h1&gt;&#x27;;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AZG90bGltL3NjcmlwdHMvLi9leGFtcGxlL3NyYy9pbmRleC5qcz8yNGE3Il0sIm5hbWVzIjpbImNvbnNvbGUiLCJkb2N1bWVudCJdLCJtYXBwaW5ncyI6IkFBQUFBLE9BQU8sQ0FBUEEsR0FBQUEsQ0FBQUEsSUFBQUEsRUFDQUMsUUFBUSxDQUFSQSxJQUFBQSxDQUFBQSxTQUFBQSxDQUFBQSx1QkFBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zb2xlLmxvZygxMTIyKTtcclxuZG9jdW1lbnQuYm9keS5pbm5lckhUTUwgPSAnPGgxPkhlbGxvIHdvcmxkITwvaDE+JztcclxuIl0sImZpbGUiOiI0MTMuanMiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///413\n&quot;</span>)&#125;)();</span><br></pre></td></tr></table></figure>

<p>映射形式 <code>index.js?24a7:1</code></p>
<h3 id="特定场景"><a href="#特定场景" class="headerlink" title="特定场景"></a>特定场景</h3><p><strong>inline-source-map</strong></p>
<p>source map 转换为 DataUrl 后添加到 bundle 中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1122</span>),<span class="built_in">document</span>.body.innerHTML=<span class="string">&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AZG90bGltL3NjcmlwdHMvLi9leGFtcGxlL3NyYy9pbmRleC5qcyJdLCJuYW1lcyI6WyJjb25zb2xlIiwiZG9jdW1lbnQiXSwibWFwcGluZ3MiOiJBQUFBQSxrQkFDQUMiLCJmaWxlIjoianMvbWFpbi45Njc4ZjIwZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnNvbGUubG9nKDExMjIpO1xyXG5kb2N1bWVudC5ib2R5LmlubmVySFRNTCA9ICc8aDE+SGVsbG8gd29ybGQhPC9oMT4nO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9</span></span><br></pre></td></tr></table></figure>

<p>映射形式 <code>index.js:1</code></p>
<p><strong>cheap-source-map</strong></p>
<p>没有列映射(column mapping)的 source map，忽略 loader source map。生成单独的 .map 文件。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1122</span>),<span class="built_in">document</span>.body.innerHTML=<span class="string">&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//# sourceMappingURL=main.c20330fd.js.map</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;version&quot;</span>:<span class="number">3</span>,<span class="string">&quot;file&quot;</span>:<span class="string">&quot;js/main.c20330fd.js&quot;</span>,<span class="string">&quot;sources&quot;</span>:[<span class="string">&quot;webpack://@dotlim/scripts/js/main.c20330fd.js&quot;</span>],<span class="string">&quot;sourcesContent&quot;</span>:[<span class="string">&quot;console.log(1122),document.body.innerHTML=\&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;\&quot;;&quot;</span>],<span class="string">&quot;mappings&quot;</span>:<span class="string">&quot;AAAA&quot;</span>,<span class="string">&quot;sourceRoot&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p>映射形式 <code>main.c20330fd.js:1</code></p>
<p><strong>inline-cheap-source-map</strong></p>
<p>类似 cheap-source-map，但是 source map 转换为 DataURL 添加到 bundle 中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1122</span>),<span class="built_in">document</span>.body.innerHTML=<span class="string">&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvbWFpbi45Njc4ZjIwZS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL0Bkb3RsaW0vc2NyaXB0cy9qcy9tYWluLjk2NzhmMjBlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnNvbGUubG9nKDExMjIpLGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MPVwiPGgxPkhlbGxvIHdvcmxkITwvaDE+XCI7Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==</span></span><br></pre></td></tr></table></figure>

<p>映射形式 <code>main.9678f20e.js:1</code></p>
<p><strong>cheap-module-source-map</strong></p>
<p>没有列映射(column mapping)的 source map，将 loader source map 简化为每行一个映射(mapping)。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1122</span>),<span class="built_in">document</span>.body.innerHTML=<span class="string">&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//# sourceMappingURL=main.c20330fd.js.map</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;version&quot;</span>:<span class="number">3</span>,<span class="string">&quot;file&quot;</span>:<span class="string">&quot;js/main.c20330fd.js&quot;</span>,<span class="string">&quot;sources&quot;</span>:[<span class="string">&quot;webpack://@dotlim/scripts/js/main.c20330fd.js&quot;</span>],<span class="string">&quot;mappings&quot;</span>:<span class="string">&quot;AACA&quot;</span>,<span class="string">&quot;sourceRoot&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p>映射形式 <code>main.c20330fd.js:2</code> 【靓仔疑惑??不准】</p>
<p><strong>inline-cheap-module-source-map</strong></p>
<p>类似 cheap-module-source-map，但是 source map 转换为 DataURL 添加到 bundle 中。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1122</span>),<span class="built_in">document</span>.body.innerHTML=<span class="string">&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvbWFpbi45Njc4ZjIwZS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL0Bkb3RsaW0vc2NyaXB0cy9qcy9tYWluLjk2NzhmMjBlLmpzIl0sIm1hcHBpbmdzIjoiQUFDQSIsInNvdXJjZVJvb3QiOiIifQ==</span></span><br></pre></td></tr></table></figure>

<p>映射形式 <code>main.9678f20e.js:2</code></p>
<h3 id="对于生产环境"><a href="#对于生产环境" class="headerlink" title="对于生产环境"></a>对于生产环境</h3><p><strong>source-map</strong></p>
<p>整个 source map 作为一个单独的文件生成。它为 bundle 添加了一个引用注释，以便开发工具知道在哪里可以找到它。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1122</span>),<span class="built_in">document</span>.body.innerHTML=<span class="string">&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//# sourceMappingURL=main.c20330fd.js.map</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;version&quot;</span>:<span class="number">3</span>,<span class="string">&quot;sources&quot;</span>:[<span class="string">&quot;webpack://@dotlim/scripts/./example/src/index.js&quot;</span>],<span class="string">&quot;names&quot;</span>:[<span class="string">&quot;console&quot;</span>,<span class="string">&quot;document&quot;</span>],<span class="string">&quot;mappings&quot;</span>:<span class="string">&quot;AAAAA,kBACAC&quot;</span>,<span class="string">&quot;file&quot;</span>:<span class="string">&quot;js/main.c20330fd.js&quot;</span>,<span class="string">&quot;sourcesContent&quot;</span>:[<span class="string">&quot;console.log(1122);\r\ndocument.body.innerHTML = &#x27;&lt;h1&gt;Hello world!&lt;/h1&gt;&#x27;;\r\n&quot;</span>],<span class="string">&quot;sourceRoot&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>hidden-source-map</strong></p>
<p>与 source-map 相同，但不会为 bundle 添加引用注释。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1122</span>),<span class="built_in">document</span>.body.innerHTML=<span class="string">&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;</span>;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;version&quot;</span>:<span class="number">3</span>,<span class="string">&quot;sources&quot;</span>:[<span class="string">&quot;webpack://@dotlim/scripts/./example/src/index.js&quot;</span>],<span class="string">&quot;names&quot;</span>:[<span class="string">&quot;console&quot;</span>,<span class="string">&quot;document&quot;</span>],<span class="string">&quot;mappings&quot;</span>:<span class="string">&quot;AAAAA,kBACAC&quot;</span>,<span class="string">&quot;file&quot;</span>:<span class="string">&quot;js/main.d211ed7f.js&quot;</span>,<span class="string">&quot;sourcesContent&quot;</span>:[<span class="string">&quot;console.log(1122);\r\ndocument.body.innerHTML = &#x27;&lt;h1&gt;Hello world!&lt;/h1&gt;&#x27;;\r\n&quot;</span>],<span class="string">&quot;sourceRoot&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p>映射形式 <code>main.d211ed7f.js:1</code></p>
<p><strong>nosources-source-map</strong></p>
<p>创建的 source map 不包含 <code>sourcesContent</code>。它可以用来映射客户端上的堆栈跟踪，而无须暴露所有的源代码。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1122</span>),<span class="built_in">document</span>.body.innerHTML=<span class="string">&quot;&lt;h1&gt;Hello world!&lt;/h1&gt;&quot;</span>;</span><br><span class="line"><span class="comment">//# sourceMappingURL=main.c20330fd.js.map</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;version&quot;</span>:<span class="number">3</span>,<span class="string">&quot;sources&quot;</span>:[<span class="string">&quot;webpack://@dotlim/scripts/./example/src/index.js&quot;</span>],<span class="string">&quot;names&quot;</span>:[<span class="string">&quot;console&quot;</span>,<span class="string">&quot;document&quot;</span>],<span class="string">&quot;mappings&quot;</span>:<span class="string">&quot;AAAAA,kBACAC&quot;</span>,<span class="string">&quot;file&quot;</span>:<span class="string">&quot;js/main.c20330fd.js&quot;</span>,<span class="string">&quot;sourceRoot&quot;</span>:<span class="string">&quot;&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p>映射形式 <code>index.js:1</code></p>

  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.</span> <span class="toc-text">使用场景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%94%AE%E5%AD%97%E5%8F%8A%E4%BD%9C%E7%94%A8"><span class="toc-number">2.</span> <span class="toc-text">关键字及作用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E8%B4%A8%E9%87%8F%E8%AF%B4%E6%98%8E"><span class="toc-number">3.</span> <span class="toc-text">代码质量说明</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B8%B8%E8%A7%81%E9%85%8D%E7%BD%AE%E5%88%86%E6%9E%90"><span class="toc-number">4.</span> <span class="toc-text">常见配置分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF%E5%88%86%E6%9E%90"><span class="toc-number">5.</span> <span class="toc-text">具体应用场景分析</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E4%BA%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">5.1.</span> <span class="toc-text">对于开发环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%89%B9%E5%AE%9A%E5%9C%BA%E6%99%AF"><span class="toc-number">5.2.</span> <span class="toc-text">特定场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E4%BA%8E%E7%94%9F%E4%BA%A7%E7%8E%AF%E5%A2%83"><span class="toc-number">5.3.</span> <span class="toc-text">对于生产环境</span></a></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=https://oxyzhg.cn/post/36fc7ed/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=https://oxyzhg.cn/post/36fc7ed/&text=Source Map 配置分析"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=https://oxyzhg.cn/post/36fc7ed/&title=Source Map 配置分析"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=https://oxyzhg.cn/post/36fc7ed/&is_video=false&description=Source Map 配置分析"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Source Map 配置分析&body=Check out this article: https://oxyzhg.cn/post/36fc7ed/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=https://oxyzhg.cn/post/36fc7ed/&title=Source Map 配置分析"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=https://oxyzhg.cn/post/36fc7ed/&title=Source Map 配置分析"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=https://oxyzhg.cn/post/36fc7ed/&title=Source Map 配置分析"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=https://oxyzhg.cn/post/36fc7ed/&title=Source Map 配置分析"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=https://oxyzhg.cn/post/36fc7ed/&name=Source Map 配置分析&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=https://oxyzhg.cn/post/36fc7ed/&t=Source Map 配置分析"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2021 Oxyzhg
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/categories/">Category</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/search/">Search</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->


</body>
</html>
