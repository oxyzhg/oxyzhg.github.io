<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/fex/blog/rss.xml" title="FEX Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/fex/blog/atom.xml" title="FEX Blog Atom Feed"><title data-react-helmet="true">项目性能优化实践 | FEX</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="项目性能优化实践 | FEX"><meta data-react-helmet="true" name="description" content="本文以 Vue 项目为例，分别从代码层面优化、webpack 层面优化、基础的 Web 技术优化三个方面，概述常见的 Web 优化方式。其中一些优化方式是通用的，可以用到其他 SPA 框架开发的应用中。"><meta data-react-helmet="true" property="og:description" content="本文以 Vue 项目为例，分别从代码层面优化、webpack 层面优化、基础的 Web 技术优化三个方面，概述常见的 Web 优化方式。其中一些优化方式是通用的，可以用到其他 SPA 框架开发的应用中。"><meta data-react-helmet="true" property="og:url" content="https://your-docusaurus-test-site.com/fex/docs/performance/project-practice"><link data-react-helmet="true" rel="shortcut icon" href="/fex/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://your-docusaurus-test-site.com/fex/docs/performance/project-practice"><link rel="stylesheet" href="/fex/styles.1cdc928b.css">
<link rel="preload" href="/fex/styles.5ab8757f.js" as="script">
<link rel="preload" href="/fex/runtime~main.d261c15c.js" as="script">
<link rel="preload" href="/fex/main.6cd2b2a2.js" as="script">
<link rel="preload" href="/fex/1.48d9a7c8.js" as="script">
<link rel="preload" href="/fex/2.8e5840e9.js" as="script">
<link rel="preload" href="/fex/83.3d067136.js" as="script">
<link rel="preload" href="/fex/84.8def44a9.js" as="script">
<link rel="preload" href="/fex/935f2afb.bd41582b.js" as="script">
<link rel="preload" href="/fex/17896441.e1072983.js" as="script">
<link rel="preload" href="/fex/67ab3643.31cc9d42.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/fex/"><img src="/fex/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/fex/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">FEX</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/fex/docs/advanced">前端进阶</a><a class="navbar__item navbar__link" href="/fex/docs/engineering">工程化</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/fex/docs/performance">性能优化</a><a href="https://github.com/oxyzhg/fex" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/fex/"><img src="/fex/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/fex/img/logo.svg" alt="My Site Logo" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">FEX</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/fex/docs/advanced">前端进阶</a></li><li class="menu__list-item"><a class="menu__link" href="/fex/docs/engineering">工程化</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/fex/docs/performance">性能优化</a></li><li class="menu__list-item"><a href="https://github.com/oxyzhg/fex" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/fex/docs/performance">概览</a></li><li class="menu__list-item"><a class="menu__link" href="/fex/docs/engineering/webpack/optimization-analysis">Webpack 构建优化分析</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/fex/docs/performance/project-practice">项目性能优化实践</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">项目性能优化实践</h1></header><div class="markdown"><p>本文以 Vue 项目为例，分别从代码层面优化、webpack 层面优化、基础的 Web 技术优化三个方面，概述常见的 Web 优化方式。其中一些优化方式是通用的，可以用到其他 SPA 框架开发的应用中。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="代码层面的优化"></a>代码层面的优化<a class="hash-link" href="#代码层面的优化" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="v-if-和-v-show-区分使用场景"></a>v-if 和 v-show 区分使用场景<a class="hash-link" href="#v-if-和-v-show-区分使用场景" title="Direct link to heading">#</a></h3><p>v-if 是真正的条件渲染，因为它会确保在切换过程中条件块内的事件监听器和子组件适当地被销毁和重建；也是<strong>惰性的</strong>：如果在初始渲染时条件为假，则什么也不做——直到条件第一次变为真时，才会开始渲染条件块。</p><p>v-show 就简单得多，不管初始条件是什么，元素总是会被渲染，并且只是简单地基于 CSS 的 display 属性进行切换。</p><p>所以，v-if 适用于在运行时很少改变条件，不需要频繁切换条件的场景；v-show 则适用于需要非常频繁切换条件的场景。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="computed-和-watch-区分使用场景"></a>computed 和 watch 区分使用场景<a class="hash-link" href="#computed-和-watch-区分使用场景" title="Direct link to heading">#</a></h3><p>computed：是计算属性，依赖其它属性值，并且 computed 的值有缓存，只有它依赖的属性值发生改变，下一次获取 computed 的值时才会重新计算 computed 的值。</p><p>watch：更多的是观察的作用，类似于某些数据的监听回调 ，每当监听的数据变化时都会执行回调进行后续操作。</p><p>使用场景：</p><ul><li>当我们需要进行数值计算，并且依赖于其它数据时，应该使用 computed，因为可以利用 computed 的缓存特性，避免每次获取值时，都要重新计算。</li><li>当我们需要在数据变化时执行异步或开销较大的操作时，应该使用 watch，使用 watch 选项允许我们执行异步操作，限制我们执行该操作的频率，并在我们得到最终结果前，设置中间状态。这些都是计算属性无法做到的。</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="v-for-遍历必须为-item-添加-key，且避免同时使用-v-if"></a>v-for 遍历必须为 item 添加 key，且避免同时使用 v-if<a class="hash-link" href="#v-for-遍历必须为-item-添加-key，且避免同时使用-v-if" title="Direct link to heading">#</a></h3><p>列表渲染时，需要为每一项 item 设置唯一 key 值，方便 DOM Diff 时快速找到可以复用的节点，减少不必要的 DOM 操作，提升渲染性能。</p><p>v-for 比 v-if 优先级更高，如果每一次都需要遍历整个数组，将会影响速度，尤其是当之需要渲染很小一部分的时候，必要情况下应该替换成 computed 属性。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="长列表性能优化"></a>长列表性能优化<a class="hash-link" href="#长列表性能优化" title="Direct link to heading">#</a></h3><p>Vue 会通过 Object.defineProperty 对数据进行劫持，来实现视图响应数据的变化，然而有些时候我们的组件就是纯粹的数据展示，不会有任何改变，我们就不需要 Vue 来劫持我们的数据，在大量数据展示的情况下，这能够很明显的减少组件初始化的时间。可以通过 Object.freeze 方法来冻结一个对象，一旦被冻结的对象就再也不能被修改了。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="事件的销毁"></a>事件的销毁<a class="hash-link" href="#事件的销毁" title="Direct link to heading">#</a></h3><p>Vue 组件销毁时，会自动清理它与其它实例的连接，解绑它的全部指令及事件监听器，但是仅限于组件本身的事件。如果使用 addEventListene 等方式自定义事件，是不会自动销毁的，我们需要在组件销毁时手动移除这些事件的监听，以免造成内存泄露。如：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword module" style="color:#e3116c">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#e3116c">default</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">created</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">addEventListener</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&#x27;click&#x27;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> clickHandler</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(0, 92, 197)">false</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token function" style="color:rgb(111, 66, 193)">beforeDestroy</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">    </span><span class="token function" style="color:rgb(111, 66, 193)">removeEventListener</span><span class="token punctuation" style="color:rgb(36, 41, 46)">(</span><span class="token string">&#x27;click&#x27;</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> clickHandler</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(0, 92, 197)">false</span><span class="token punctuation" style="color:rgb(36, 41, 46)">)</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">,</span><span class="token plain"></span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain"></span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span><span class="token punctuation" style="color:rgb(36, 41, 46)">;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="图片资源懒加载"></a>图片资源懒加载<a class="hash-link" href="#图片资源懒加载" title="Direct link to heading">#</a></h3><p>对于图片过多的页面，为了加速页面加载速度，所以很多时候我们需要将页面内未出现在可视区域内的图片先不做加载，等到滚动到可视区域后再去加载。这样对于页面加载性能上会有很大的提升，也提高了用户体验。</p><p>我们在项目中可以使用 vue-lazyload 插件，或者通过 IntersectionObserver API 自定义实现。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="路由懒加载"></a>路由懒加载<a class="hash-link" href="#路由懒加载" title="Direct link to heading">#</a></h3><p>Vue 是单页面应用，可能会有很多的路由引入 ，这样使用 webpcak 打包后的文件很大，当进入首页时，加载的资源过多，页面会出现白屏的情况，不利于用户体验。如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应的组件，这样就更加高效了。这样会大大提高首屏显示的速度，但是可能其他的页面的速度就会降下来。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="第三方插件的按需引入"></a>第三方插件的按需引入<a class="hash-link" href="#第三方插件的按需引入" title="Direct link to heading">#</a></h3><p>我们在项目中经常会需要引入第三方插件，如果我们直接引入整个插件，会导致项目的体积太大，我们可以借助 babel-plugin-component ，然后可以只引入需要的组件，以达到减小项目体积的目的。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="优化无限列表的性能"></a>优化无限列表的性能<a class="hash-link" href="#优化无限列表的性能" title="Direct link to heading">#</a></h3><p>如果你的应用存在非常长或者无限滚动的列表，那么需要采用窗口化的技术来优化性能，只需要渲染少部分区域的内容，减少重新渲染组件和创建 dom 节点的时间。你可以参考以下开源项目 <a href="https://github.com/tangbc/vue-virtual-scroll-list" target="_blank" rel="noopener noreferrer">vue-virtual-scroll-list</a> 和 <a href="https://github.com/Akryum/vue-virtual-scroller" target="_blank" rel="noopener noreferrer">vue-virtual-scroller</a> 来优化这种无限列表的场景的。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="webpack-层面的优化"></a>Webpack 层面的优化<a class="hash-link" href="#webpack-层面的优化" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="压缩图片"></a>压缩图片<a class="hash-link" href="#压缩图片" title="Direct link to heading">#</a></h3><p>在项目中除了可以使用 url-loader 设置 limit 大小来对图片处理，对小于 limit 的图片转化为 base64 格式，其余的不做操作。所以对有些较大的图片资源，在请求资源的时候，加载会很慢，我们可以用 image-webpack-loader 来压缩图片。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="减少-es6-转为-es5-的冗余代码"></a>减少 ES6 转为 ES5 的冗余代码<a class="hash-link" href="#减少-es6-转为-es5-的冗余代码" title="Direct link to heading">#</a></h3><p>Babel 插件会在将 ES6 代码转换成 ES5 代码时会注入一些辅助函数，例如下面的 ES6 代码：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-js codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token keyword" style="color:#e3116c">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">HelloWebpack</span><span class="token plain"> </span><span class="token keyword" style="color:#e3116c">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(227, 98, 9)">Component</span><span class="token punctuation" style="color:rgb(36, 41, 46)">{</span><span class="token spread operator" style="color:rgb(0, 92, 197)">...</span><span class="token punctuation" style="color:rgb(36, 41, 46)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>这段代码再被转换成能正常运行的 ES5 代码时需要以下两个辅助函数：</p><div class="mdxCodeBlock_1zKU"><div class="codeBlockContent_actS"><div tabindex="0" class="prism-code language-basic codeBlock_tuNs thin-scrollbar"><div class="codeBlockLines_3uvA" style="color:rgb(36, 41, 46);background-color:#f6f8fa"><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">babel-runtime/helpers/createClass  // 用于实现 class 语法</span></div><div class="token-line" style="color:rgb(36, 41, 46)"><span class="token plain">babel-runtime/helpers/inherits     // 用于实现 extends 语法</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_2GIj">Copy</button></div></div><p>在默认情况下，Babel 会在每个输出文件中内嵌这些依赖的辅助函数代码，如果多个源代码文件都依赖这些辅助函数，那么这些辅助函数的代码将会出现很多次，造成代码冗余。为了不让这些辅助函数的代码重复出现，可以在依赖它们时通过 <code>require(&#x27;babel-runtime/helpers/createClass&#x27;)</code> 的方式导入，这样就能做到只让它们出现一次。babel-plugin-transform-runtime 插件就是用来实现这个作用的，将相关辅助函数进行替换成导入语句，从而减小 babel 编译出来的代码的文件大小。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="提取公共代码"></a>提取公共代码<a class="hash-link" href="#提取公共代码" title="Direct link to heading">#</a></h3><p>如果项目中没有去将每个页面的第三方库和公共模块提取出来，则项目会存在以下问题：</p><ul><li>相同的资源被重复加载，浪费用户的流量和服务器的成本。</li><li>每个页面需要加载的资源太大，导致网页首屏加载缓慢，影响用户体验。</li></ul><p>所以我们需要将多个页面的公共代码抽离成单独的文件，来优化以上问题，这个操作称为分包。Webpack 内置了专门用于提取多个 Chunk 中的公共部分的插件 <a href="https://webpack.docschina.org/plugins/split-chunks-plugin/" target="_blank" rel="noopener noreferrer">SplitChunksPlugin</a>，通常我们是直接在 optimization.splitChunks 属性中配置来实现。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="优化-sourcemap"></a>优化 SourceMap<a class="hash-link" href="#优化-sourcemap" title="Direct link to heading">#</a></h3><p>我们在项目进行打包后，会将开发中的多个文件代码打包到一个文件中，并且经过压缩、去掉多余的空格、babel 编译化后，最终将编译得到的代码会用于线上环境，那么这样处理后的代码和源代码会有很大的差别，当有 bug 的时候，我们只能定位到压缩处理后的代码位置，无法定位到开发环境中的代码，对于开发来说不好调式定位问题，因此 sourceMap 出现了，它就是为了解决不好调式代码问题的。</p><p>SourceMap 的可选值有很多，不同的配置也存在较大的差异，我们通常会根据不同的场景选择不同的配置。开发环境推荐使用 cheap-module-eval-source-map 配置，生成环境推荐使用 cheap-module-source-map 配置。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="构建结果输出分析"></a>构建结果输出分析<a class="hash-link" href="#构建结果输出分析" title="Direct link to heading">#</a></h3><p>Webpack 输出的代码可读性非常差而且文件非常大，让我们非常头疼。为了更简单、直观地分析输出结果，社区中出现了许多可视化分析工具。这些工具以图形的方式将结果更直观地展示出来，让我们快速了解问题所在。项目中通常会选择使用 webpack-bundle-analyzer 插件生成分析报告，然后根据报告选择性优化一些对构建性能影响较大的点。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="web-层面的优化"></a>Web 层面的优化<a class="hash-link" href="#web-层面的优化" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="开启-gzip-压缩"></a>开启 gzip 压缩<a class="hash-link" href="#开启-gzip-压缩" title="Direct link to heading">#</a></h3><p>gzip 是 GNUzip 的缩写，最早用于 UNIX 系统的文件压缩。HTTP 协议上的 gzip 编码是一种用来改进 web 应用程序性能的技术，web 服务器和客户端（浏览器）必须共同支持 gzip。目前主流的浏览器，Chrome，firefox，IE 等都支持该协议。常见的服务器如 Apache，Nginx，IIS 同样支持，gzip 压缩效率非常高，通常可以达到 70% 的压缩率，也就是说，如果你的网页有 30K，压缩之后就变成了 9K 左右。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="浏览器缓存"></a>浏览器缓存<a class="hash-link" href="#浏览器缓存" title="Direct link to heading">#</a></h3><p>为了提高用户加载页面的速度，对静态资源进行缓存是非常必要的，根据是否需要重新向服务器发起请求来分类，将 HTTP 缓存规则分为两类：强缓存、协商缓存。推荐阅读<a href="https://juejin.cn/post/6844903801778864136" target="_blank" rel="noopener noreferrer">深入理解 HTTP 缓存机制及原理 </a>。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="cdn-的使用"></a>CDN 的使用<a class="hash-link" href="#cdn-的使用" title="Direct link to heading">#</a></h3><p>浏览器从服务器上下载资源文件时都要和服务器连接，而大部分服务器的带宽有限，如果超过限制，网页就半天反应不过来。而 CDN 可以通过不同的域名来加载文件，从而使下载文件的并发连接数大大增加，且 CDN 具有更好的可用性，更低的网络延迟和丢包率。</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="使用-chrome-performance-查找性能瓶颈"></a>使用 Chrome Performance 查找性能瓶颈<a class="hash-link" href="#使用-chrome-performance-查找性能瓶颈" title="Direct link to heading">#</a></h3><p>Chrome 的 Performance 面板可以录制一段时间内的 js 执行细节及时间。使用 Chrome 开发者工具分析页面性能的步骤如下。</p><ol><li>打开 Chrome Performance 面板</li><li>点击 Record 开始录制</li><li>刷新页面或展开某个节点</li><li>点击 Stop 停止录制</li></ol></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/oxyzhg/fex/edit/main/docs/performance/project-practice.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/fex/docs/engineering/webpack/optimization-analysis"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Webpack 构建优化分析</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#代码层面的优化" class="table-of-contents__link">代码层面的优化</a><ul><li><a href="#v-if-和-v-show-区分使用场景" class="table-of-contents__link">v-if 和 v-show 区分使用场景</a></li><li><a href="#computed-和-watch-区分使用场景" class="table-of-contents__link">computed 和 watch 区分使用场景</a></li><li><a href="#v-for-遍历必须为-item-添加-key，且避免同时使用-v-if" class="table-of-contents__link">v-for 遍历必须为 item 添加 key，且避免同时使用 v-if</a></li><li><a href="#长列表性能优化" class="table-of-contents__link">长列表性能优化</a></li><li><a href="#事件的销毁" class="table-of-contents__link">事件的销毁</a></li><li><a href="#图片资源懒加载" class="table-of-contents__link">图片资源懒加载</a></li><li><a href="#路由懒加载" class="table-of-contents__link">路由懒加载</a></li><li><a href="#第三方插件的按需引入" class="table-of-contents__link">第三方插件的按需引入</a></li><li><a href="#优化无限列表的性能" class="table-of-contents__link">优化无限列表的性能</a></li></ul></li><li><a href="#webpack-层面的优化" class="table-of-contents__link">Webpack 层面的优化</a><ul><li><a href="#压缩图片" class="table-of-contents__link">压缩图片</a></li><li><a href="#减少-es6-转为-es5-的冗余代码" class="table-of-contents__link">减少 ES6 转为 ES5 的冗余代码</a></li><li><a href="#提取公共代码" class="table-of-contents__link">提取公共代码</a></li><li><a href="#优化-sourcemap" class="table-of-contents__link">优化 SourceMap</a></li><li><a href="#构建结果输出分析" class="table-of-contents__link">构建结果输出分析</a></li></ul></li><li><a href="#web-层面的优化" class="table-of-contents__link">Web 层面的优化</a><ul><li><a href="#开启-gzip-压缩" class="table-of-contents__link">开启 gzip 压缩</a></li><li><a href="#浏览器缓存" class="table-of-contents__link">浏览器缓存</a></li><li><a href="#cdn-的使用" class="table-of-contents__link">CDN 的使用</a></li><li><a href="#使用-chrome-performance-查找性能瓶颈" class="table-of-contents__link">使用 Chrome Performance 查找性能瓶颈</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/fex/docs/advanced">前端进阶</a></li><li class="footer__item"><a class="footer__link-item" href="/fex/docs/engineering">前端工程化</a></li><li class="footer__item"><a class="footer__link-item" href="/fex/docs/algorithms">数据结构与算法</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://juejin.cn/user/571401775099528" target="_blank" rel="noopener noreferrer" class="footer__link-item">掘金</a></li><li class="footer__item"><a href="https://www.yuque.com/oxyzhg" target="_blank" rel="noopener noreferrer" class="footer__link-item">语雀</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/oxyzhg" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">© 2021 Oxyzhg</div></div></div></footer></div>
<script src="/fex/styles.5ab8757f.js"></script>
<script src="/fex/runtime~main.d261c15c.js"></script>
<script src="/fex/main.6cd2b2a2.js"></script>
<script src="/fex/1.48d9a7c8.js"></script>
<script src="/fex/2.8e5840e9.js"></script>
<script src="/fex/83.3d067136.js"></script>
<script src="/fex/84.8def44a9.js"></script>
<script src="/fex/935f2afb.bd41582b.js"></script>
<script src="/fex/17896441.e1072983.js"></script>
<script src="/fex/67ab3643.31cc9d42.js"></script>
</body>
</html>